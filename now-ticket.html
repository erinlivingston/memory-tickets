<!--Separate page for the 'now ticket' interactive, explore the piece on its own -->
<!DOCTYPE html> 
<html lang = "en">

<head>
    <meta charset = "UTF-8" />
    <title>Now Ticket</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>

</head>
<div id="prototypeNotice">Prototype Site</div>
<div id="ticketselectionnotice">
    Ticket form still in build, 
    <span id="planningNotesLink" style="cursor: pointer; text-decoration: underline; color: blue;">click to see planning notes</span>.
  </div>
  <div id="planningNotesModal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <img id="planningNotesImage" src="assets/planning-notes.jpg" alt="Planning Notes" />
    </div>
  </div>
<body>

    <nav>
        <a href="entrance.html">Enter</a>
        <a href="selection.html">Select</a>
        <a href="now-ticket.html">Ticket</a>
        <a href="index.html">About</a>
        <a href="archive/archive.html">Microarchive</a>
        <a href="colorGrid.html">Color</a>
    </nav>

<!-- Perler Ticket Base Image-->
<div id="tile-container">
    <img src="assets/art/perlerTile-v2-edited.png" alt="Perler bead tile layer" id="tile-bg">
    
    <div id="qr-code-container"></div>
</div>

<canvas id="yourCanvasId" width="500" height="500"></canvas>

<script src="sketch.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
<script src="dotqr-code.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const canvas = document.getElementById("yourCanvasId"); // Replace with your canvas ID
  const ctx = canvas.getContext("2d");

  // Retrieve the Code Name from localStorage
  const codeName = localStorage.getItem("codeName") || "No Code Name";

  // Display the Code Name on the canvas
  ctx.font = "20px Arial";
  ctx.fillStyle = "black";
  ctx.fillText(`Code Name: ${codeName}`, 50, 50); // Adjust position as needed
});
const planningNotesLink = document.getElementById("planningNotesLink");
  const planningNotesImage = document.getElementById("planningNotesImage");

  if (planningNotesLink && planningNotesImage) {
    planningNotesLink.addEventListener("click", () => {
      // Toggle the visibility of the image
      if (planningNotesImage.style.display === "none" || planningNotesImage.style.display === "") {
        planningNotesImage.style.display = "block"; // Show the image
      } else {
        planningNotesImage.style.display = "none"; // Hide the image
      }
    });
  }

  const planningNotesModal = document.getElementById("planningNotesModal");
  const closeButton = document.querySelector(".close-button");

  if (planningNotesLink && planningNotesModal && closeButton) {
    // Show the modal when the link is clicked
    planningNotesLink.addEventListener("click", () => {
      planningNotesModal.style.display = "flex"; // Show the modal
    });

    // Hide the modal when the close button is clicked
    closeButton.addEventListener("click", () => {
      planningNotesModal.style.display = "none"; // Hide the modal
    });

    // Hide the modal when clicking outside the modal content
    planningNotesModal.addEventListener("click", (e) => {
      if (e.target === planningNotesModal) {
        planningNotesModal.style.display = "none"; // Hide the modal
      }
    });
  }

</script>

</body>

</html>